<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>AR demo </title>
  <script src="https://aframe.io/releases/1.1.0/aframe.min.js"></script>
  <script src="https://jeromeetienne.github.io/AR.js/aframe/build/aframe-ar.js" charset="utf-8"></script>
  <script src="https://raw.githack.com/fcor/arjs-gestures/master/dist/gestures.js"></script>
  <script src="js/oppakken.js"></script>

  <script>
  window.onload = () =>{
    const places = document.getElementsByClassName('js--place');
    const camera = document.getElementById('js--camera');

    let pickups = document.getElementsByClassName('js--pickup');
    let hold = null;

    const placeholders = document.getElementsByClassName('js--placeholder');
    let scene = document.getElementById('js--scene');

  function addListeners() {
    for (let i = 0; i < pickups.length; i++) {
      pickups[i].addEventListener('click', function(evt){
        if (hold == null) {
          alert('Je heeft dit object verzameld! Dit is object ' + hold + " van de 4!")
          hold += 1;
            this.remove();
      } if (hold == 1) {
          alert('Je heeft dit object verzameld! Dit is object ' + hold + " van de 4!")
        hold += 1;
          this.remove();
    } if (hold == 2) {
      hold += 1;
        alert('Je heeft dit object verzameld! Dit is object ' + hold + " van de 4!")
          this.remove();
  }
      });
    }
  }

  addListeners();

    for (let i = 0; i < placeholders.length; i++) {
      placeholders[i].addEventListener('click', function(evt){
        if (hold == "box"){
          let box = document.createElement('a-box');
          box.setAttribute("class", "js--pickup js--interact");
          box.setAttribute("color", "green");
          box.setAttribute("position", {x: this.getAttribute('position').x, y:"0.5",
          z:this.getAttribute('position').z});
          scene.appendChild(box);
          document.getElementById("js--hold").remove();
          addListeners();
          hold = null;
        }
      });
    }



    for (let i = 0; i < places.length; i++) {
      places[i].addEventListener('click', function(evt){
        let att = document.createAttribute("animation");
        att.value = "property: position; easing: linear; dur: 2000; to: "
        + this.getAttribute('position').x + " 1.6 "
        + this.getAttribute('position').z;
        camera.setAttribute('animation', att.value);
    });
    }

    };

  </script>

</head>
<body>


  <a-scene embedded arjs="trackingMethod: best; sourceType: webcam; debugUIEnabled: false;"
  renderer="logarithmicDepthBuffer: true;"
  vr-mode-ui="enabled: false"
  gesture-detector
  id="scene">
      <a-assets>
        <a-asset-item id="zuster" src="models/zusterblederdaniek.glb"></a-asset-item>
        <a-asset-item id="bandje" src="models/bandje.glb"></a-asset-item>
        <a-asset-item id="spuit" src="models/spuit.glb"></a-asset-item>
        <a-asset-item id="giraffe" src="models/giraffe.glb"></a-asset-item>
        <a-asset-item id="supergiraffe" src="models/super_giraffe.glb"></a-asset-item>

      <img id="bandjeText" src="img/bandje.png">


      </a-assets>



      <!--test toevoegen met js/tooninfo.js-->
      <!--zuster moet gefixt worden qua blender model-->
    <!--<a-entity tooninfo position="0 0.5 0" id="js--zuster" gltf-model="#zuster" scale=".02 .02 .02"></a-entity>-->
    <!--  <a-entity tooninfo position="1 3 0" id="js--bandje" gltf-model="#bandje" scale="2 3 2"></a-entity>-->
      <!--<a-entity tooninfo position="0 2 0" id="js--spuit" gltf-model="#spuit" scale="3 3 3"></a-entity>
      <a-entity tooninfo position="2 1 0" id="js--giraffe" gltf-model="#giraffe" scale="2 2 2"></a-entity>-->

    <!--  <a-entity beloning position="2 1 0" class="item" id="js--giraffe" gltf-model="#giraffe" scale="2 2 2"></a-entity>
      <a-text beloningpunten id="js--punten" value="Hello, World!" color="black"></a-text>-->
  <!-- use your gltf model -->

  <!-- stuwband -->

    <a-marker type="pattern" url="stuwband.patt">
          <!--  <a-box position="0 0.5 0" material="color:red;">
            <a-animation attribute="rotation"
            dur="3000"
            to="360 360 0"
            repeat="indefinite"
            easing="linear">
          </a-animation>
        </a-box>-->
        <a-entity class = "js--pickup js--interact"  class="clickable" gesture-handler tooninfo position="0 0 0" id="js--bandje" gltf-model="#bandje" scale="1 1 1"></a-entity>
        <!--<a-entity   class = "js--pickup js--interact" class="clickable"  gesture-handler tooninfo position="0 0 0" id="js--bandje" gltf-model="#bandje" scale="1 1 1"></a-entity>-->

    </a-marker>

    <!-- giraffe-->
    <a-marker type="pattern" url="giraffe.patt">

      <a-entity  class = "js--pickup js--interact" class="clickable" gesture-handler position="0 0 0" class="item" id="js--giraffe" gltf-model="#giraffe" scale="2 2 2"></a-entity>

    </a-marker>

    <!-- prik spuit-->
    <a-marker type="pattern" url="prik.patt">

      <a-entity  class = "js--pickup js--interact" class="clickable" gesture-handler position="0 0 0" class="item" id="js--spuit" gltf-model="#spuit" scale="2 2 2"></a-entity>

    </a-marker>



    <!--super hero -->
    <a-marker type="pattern" url="markers/pattern-superhero.patt">
      <a-entity transformeren visible="true" class="clickable" gesture-handler position="0 0 0" class="item" id="js--giraffe" gltf-model="#giraffe" scale="1 1 1"></a-entity>
      <a-entity transformeren visible="false" class="clickable" gesture-handler position="0 0 0" class="item" id="js--supergiraffe" gltf-model="#supergiraffe" scale="1 1 1"></a-entity>

    </a-marker>



    <a-camera id="js--camera" style="height: 100vh; width: 100%; position: fixed;">

      <!-- <div style="width: 20%; height:300px; background-color: #fff; position: absolute; top:0; right:0;"></div> -->

      <a-cursor id="js--cursor" color="green"> </a-cursor>
      <a-entity
        animation__click="property: scale; startEvents: click; easing: easeInCubic; dur: 150;
        from: 0.1 0.1 0.1; to: 1 1 1"
        animation__fusing="property: scale; startEvents: fusing; easing: easeInCubic; dur: 2000;
        from: 1 1 1; to: 0.1 0.1 0.1"
        animation="property: scale; startEvents: mouseleave; easing: easeInCubic; dur: 500;
        to: 1 1 1"
        cursor = "fuse: true; fuseTimeout: 2000 "
        material = "color: black; shader: flat"
        geometry = "primitive: ring; radiusInner: 0.007; radiusOuter: 0.01"
        position = "0 0 -0.5"
        raycaster = "objects: .js--interact"
      ></a-entity>
    </a-camera>

  </a-scene>

  <div style="width:100%; position: fixed; bottom: 0;">
    <div style="float: left; width: 45%">
        <img style="width: 50%;position: absolute; margin-left: 70px; bottom:0;  margin-bottom: 20px;" src="img/dialoog-1.png"> </img>
      </div>
        <img id="giraf" style="float: right; width: 45%;" src="img/girraf.png"> </img>
        <!-- <div style="height:100%; width: 60%; float: left;" ></div> -->
  </div>
  <script src="main.js" charset="utf-8"></script>
  <script src="js/beloningpunten.js" charset="utf-8"></script>
  <script src="js/heroTransformeren.js" charset="utf-8"></script>
    <script src="js/conversation.js" charset="utf-8"></script>

<!--  <script src="tooninfo.js" charset="utf-8"></script>-->

</body>
</html>
